# SkyPanelV2 Environment Configuration

# Application Settings
NODE_ENV=development
PORT=3001
CLIENT_URL=http://localhost:5173
# VITE_API_URL=http://localhost:3001/api # not needed anymore by looks of it
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=7d

# SSH Credential 32+ character encrpytion
SSH_CRED_SECRET=your-32-character-encryption-key

# Branding (Frontend)
# Set the display name shown across the UI
COMPANY_NAME=SkyPanelV2
## Alternatively, you can use VITE_COMPANY_NAME
VITE_COMPANY_NAME=SkyPanelV2
COMPANY_BRAND_NAME=SkyPanelV2

# PostgreSQL Database Configuration
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/skypanelv2
# For Neon.tech or other cloud PostgreSQL providers, use their connection string:
# DATABASE_URL=postgresql://username:password@ep-example-123456.us-east-1.aws.neon.tech/skypanelv2?sslmode=require

# PayPal Configuration
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_MODE=sandbox

# SMTP2GO Email Configuration
SMTP2GO_API_KEY=your-smtp2go-api-key
SMTP2GO_USERNAME=your-smtp2go-username
SMTP2GO_PASSWORD=your-smtp2go-password
FROM_EMAIL=noreply@example.com
FROM_NAME=SkyVPS360
CONTACT_FORM_RECIPIENT=support@example.com
FROM_EMAIL=support@example.com
SMTP2GO_HOST=mail.smtp2go.com
SMTP2GO_PORT=2525 # works with most providers even if they block standard email ports
# SMTP2GO_PORT=587
# SMTP2GO_PORT=465
# Use TLS for secure email transmission
SMTP2GO_SECURE=false
# Use STARTTLS if supported by the server
SMTP2GO_REQUIRE_TLS=true
TEST_EMAIL=test@example.com

# Linode API Configuration
LINODE_API_TOKEN=your-linode-api-token
LINODE_API_URL=https://api.linode.com/v4

# DigitalOcean API Configuration (Optional)
DIGITALOCEAN_API_TOKEN=your-digitalocean-api-token

# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Encryption Key for API Keys Storage
ENCRYPTION_KEY=your-32-character-encryption-key

# Rate Limiting Configuration
# Controls API request frequency limits to prevent abuse while maintaining usability

# Legacy rate limiting (deprecated, kept for backward compatibility)
# These values are no longer used but maintained for existing deployments
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Enhanced Rate Limiting - Anonymous Users
# Limits for unauthenticated users accessing public endpoints
# Window: Time period in milliseconds (900000 = 15 minutes)
# Max: Maximum requests allowed within the window
# Recommended: 200 requests per 15 minutes for normal SPA usage
RATE_LIMIT_ANONYMOUS_WINDOW_MS=900000
RATE_LIMIT_ANONYMOUS_MAX=200

# Enhanced Rate Limiting - Authenticated Users
# Limits for users with valid JWT tokens accessing protected endpoints
# Higher limits to support authenticated application usage
# Recommended: 500 requests per 15 minutes for authenticated operations
RATE_LIMIT_AUTHENTICATED_WINDOW_MS=900000
RATE_LIMIT_AUTHENTICATED_MAX=500

# Enhanced Rate Limiting - Admin Users
# Limits for administrative operations requiring elevated privileges
# Highest limits to support admin dashboard and bulk operations
# Recommended: 1000 requests per 15 minutes for admin activities
RATE_LIMIT_ADMIN_WINDOW_MS=900000
RATE_LIMIT_ADMIN_MAX=1000

# Trust Proxy Configuration
# Critical for proper IP detection when running behind proxies or load balancers
# 
# Options:
#   'true'  - Trust all proxies (recommended for development)
#   'false' - Don't trust any proxies (direct connection only)
#   '1'     - Trust first proxy (single reverse proxy setup)
#   '2'     - Trust up to 2 proxy hops (e.g., Cloudflare + nginx)
#   'loopback' - Trust loopback addresses only
#   '10.0.0.0/8' - Trust specific subnet
#
# Development: Use 'true' when running behind Vite dev server
# Production: Use specific number or subnet for security
TRUST_PROXY=true

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads

# Monitoring Configuration
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your-influxdb-token
INFLUXDB_ORG=skypanelv2
INFLUXDB_BUCKET=metrics

# Backup Configuration
BACKUP_STORAGE_PROVIDER=local
BACKUP_RETENTION_DAYS=30

# ------------------------------------------------------------
# PaaS / CaaS Configuration
# ------------------------------------------------------------

# Feature Flags
PAAS_ENABLED=true
CAAS_ENABLED=true

# Base Domain & TLS (Traefik)
# If not set, the platform can fallback to sslip.io using node IPv4.
PAAS_BASE_DOMAIN=
TRAEFIK_ACME_EMAIL=support@example.com
# Optional: use Letâ€™s Encrypt production (default) or staging URL
TRAEFIK_ACME_CA_SERVER=https://acme-v02.api.letsencrypt.org/directory

# Swarm Manager Remote API (mTLS)
# Provide either file paths OR base64 inline values for the TLS material.
DOCKER_MANAGER_HOST=127.0.0.1
DOCKER_MANAGER_PORT=2376
DOCKER_TLS_VERIFY=1
# Option A: file paths (on the API server host)
DOCKER_TLS_CA_FILE=
DOCKER_TLS_CERT_FILE=
DOCKER_TLS_KEY_FILE=
# Option B: base64 inline (recommended for containerized API deployment)
DOCKER_TLS_CA_B64=
DOCKER_TLS_CERT_B64=
DOCKER_TLS_KEY_B64=

# Private Container Registry
PRIVATE_REGISTRY_URL=registry.example.com
REGISTRY_USERNAME=
REGISTRY_PASSWORD=
# Optional: alternate auth (token) if using cloud registries (GHCR/DOCR/ECR)
REGISTRY_AUTH_TOKEN=

# Buildpacks / CNB Defaults (used if no stack selected)
DEFAULT_CNB_BUILDER_IMAGE=paketobuildpacks/builder-jammy-base
DEFAULT_CNB_RUN_IMAGE=paketobuildpacks/run-jammy-base

# Webhook Secrets (if using GitHub/GitLab webhooks for build triggers)
GITHUB_WEBHOOK_SECRET=
GITLAB_WEBHOOK_SECRET=

# Logging / Metrics Backends
LOKI_URL=http://localhost:3100
# Optional Prometheus if enabled later
PROMETHEUS_URL=

# Object Storage for Backups (Addons, Volumes)
OBJECT_STORAGE_PROVIDER=s3
S3_ENDPOINT=
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_BUCKET=skypanelv2-backups

# CaaS Security Policies (org-level defaults; fine-tuned in admin UI)
CAAS_REQUIRE_IMAGE_DIGEST=false
CAAS_ALLOWED_REGISTRIES=
CAAS_BLOCKED_PATTERNS=
CAAS_EGRESS_DEFAULT_DENY=false
