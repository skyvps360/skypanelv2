# SkyPanelV2 Environment Configuration

# Application Settings
NODE_ENV=development
PORT=3001
CLIENT_URL=http://localhost:5173
# VITE_API_URL=http://localhost:3001/api # not needed anymore by looks of it
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=7d

# SSH Credential 32+ character encrpytion
SSH_CRED_SECRET=your-32-character-encryption-key

# Branding (Frontend)
# Set the display name shown across the UI
COMPANY_NAME=SkyPanelV2
## Alternatively, you can use VITE_COMPANY_NAME
VITE_COMPANY_NAME=SkyPanelV2
COMPANY_BRAND_NAME=SkyPanelV2

# PostgreSQL Database Configuration
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/skypanelv2
# For Neon.tech or other cloud PostgreSQL providers, use their connection string:
# DATABASE_URL=postgresql://username:password@ep-example-123456.us-east-1.aws.neon.tech/skypanelv2?sslmode=require

# PayPal Configuration
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_MODE=sandbox

# SMTP2GO Email Configuration
SMTP2GO_API_KEY=your-smtp2go-api-key
SMTP2GO_USERNAME=your-smtp2go-username
SMTP2GO_PASSWORD=your-smtp2go-password
FROM_EMAIL=noreply@example.com
FROM_NAME=SkyVPS360
CONTACT_FORM_RECIPIENT=support@example.com
FROM_EMAIL=support@example.com
SMTP2GO_HOST=mail.smtp2go.com
SMTP2GO_PORT=2525 # works with most providers even if they block standard email ports
# SMTP2GO_PORT=587
# SMTP2GO_PORT=465
# Use TLS for secure email transmission
SMTP2GO_SECURE=false
# Use STARTTLS if supported by the server
SMTP2GO_REQUIRE_TLS=true
TEST_EMAIL=test@example.com

# Linode API Configuration
LINODE_API_TOKEN=your-linode-api-token
LINODE_API_URL=https://api.linode.com/v4

# DigitalOcean API Configuration (Optional)
DIGITALOCEAN_API_TOKEN=your-digitalocean-api-token

# Easypanel configuration removed (containers deprecated)

# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Encryption Key for API Keys Storage
ENCRYPTION_KEY=your-32-character-encryption-key

# Rate Limiting Configuration
# Controls API request frequency limits to prevent abuse while maintaining usability

# Legacy rate limiting (deprecated, kept for backward compatibility)
# These values are no longer used but maintained for existing deployments
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Enhanced Rate Limiting - Anonymous Users
# Limits for unauthenticated users accessing public endpoints
# Window: Time period in milliseconds (900000 = 15 minutes)
# Max: Maximum requests allowed within the window
# Recommended: 200 requests per 15 minutes for normal SPA usage
RATE_LIMIT_ANONYMOUS_WINDOW_MS=900000
RATE_LIMIT_ANONYMOUS_MAX=200

# Enhanced Rate Limiting - Authenticated Users
# Limits for users with valid JWT tokens accessing protected endpoints
# Higher limits to support authenticated application usage
# Recommended: 500 requests per 15 minutes for authenticated operations
RATE_LIMIT_AUTHENTICATED_WINDOW_MS=900000
RATE_LIMIT_AUTHENTICATED_MAX=500

# Enhanced Rate Limiting - Admin Users
# Limits for administrative operations requiring elevated privileges
# Highest limits to support admin dashboard and bulk operations
# Recommended: 1000 requests per 15 minutes for admin activities
RATE_LIMIT_ADMIN_WINDOW_MS=900000
RATE_LIMIT_ADMIN_MAX=1000

# Trust Proxy Configuration
# Critical for proper IP detection when running behind proxies or load balancers
# 
# Options:
#   'true'  - Trust all proxies (recommended for development)
#   'false' - Don't trust any proxies (direct connection only)
#   '1'     - Trust first proxy (single reverse proxy setup)
#   '2'     - Trust up to 2 proxy hops (e.g., Cloudflare + nginx)
#   'loopback' - Trust loopback addresses only
#   '10.0.0.0/8' - Trust specific subnet
#
# Development: Use 'true' when running behind Vite dev server
# Production: Use specific number or subnet for security
TRUST_PROXY=true

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads

# Monitoring Configuration
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your-influxdb-token
INFLUXDB_ORG=skypanelv2
INFLUXDB_BUCKET=metrics

# Backup Configuration
BACKUP_STORAGE_PROVIDER=local
BACKUP_RETENTION_DAYS=30

# Container Platform Configuration
# Docker Swarm advertise address for cluster communication
# Use the server's public IP or hostname that other nodes can reach
# Example: DOCKER_SWARM_ADVERTISE_ADDR=192.168.1.100:2377
DOCKER_SWARM_ADVERTISE_ADDR=

# Container ingress domain for public service access
# This is the bare domain (without scheme or port) where container services will be accessible
# Each service gets a subdomain: {service-slug}.{CONTAINER_INGRESS_DOMAIN}
# Example: CONTAINER_INGRESS_DOMAIN=containers.example.com
# Services would be accessible at: my-app.containers.example.com
CONTAINER_INGRESS_DOMAIN=localhost

# Docker Registry URL for storing container images (optional)
# Leave empty to use local registry, or specify external registry
# Example: DOCKER_REGISTRY_URL=registry.example.com
DOCKER_REGISTRY_URL=

# Docker Registry credentials (optional, only if using authenticated registry)
DOCKER_REGISTRY_USERNAME=
DOCKER_REGISTRY_PASSWORD=

# Nix binary cache URL for faster package builds (optional)
# Leave empty to use default cache.nixos.org
# Example: NIX_CACHE_URL=https://cache.nixos.org
NIX_CACHE_URL=

# Nix build workspace directory (optional)
# Directory where Nix builds are executed
NIX_BUILD_WORKSPACE=/tmp/skypanel-builds

# Nix local cache directory (optional)
# Directory for caching Nix packages locally
NIX_LOCAL_CACHE_DIR=/var/cache/nix

# Enable or disable container billing integration
# Set to 'false' to disable hourly billing for containers (useful for testing)
CONTAINER_BILLING_ENABLED=true

# Worker node heartbeat interval in seconds
# How often worker nodes send health status updates to the manager
WORKER_HEARTBEAT_INTERVAL=30

# Worker node heartbeat timeout in seconds
# Time before a worker is marked unhealthy if no heartbeat received
WORKER_HEARTBEAT_TIMEOUT=120

# API URL for worker nodes to communicate with the manager
# This should be the full URL to the API server (including scheme and port)
# Workers use this to send heartbeats and receive deployment commands
# Example: API_URL=https://api.example.com
# Development: API_URL=http://localhost:3001
API_URL=http://localhost:3001
