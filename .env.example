# SkyPanelV2 Environment Configuration

# Application Settings
NODE_ENV=development
PORT=3001
CLIENT_URL=http://localhost:5173
# VITE_API_URL=http://localhost:3001/api # not needed anymore by looks of it
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=7d

# SSH Credential 32+ character encrpytion
SSH_CRED_SECRET=your-32-character-encryption-key

# Branding (Frontend)
# Set the display name shown across the UI
COMPANY_NAME=SkyPanelV2
## Alternatively, you can use VITE_COMPANY_NAME
VITE_COMPANY_NAME=SkyPanelV2
COMPANY_BRAND_NAME=SkyPanelV2

# PostgreSQL Database Configuration
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/skypanelv2
# For Neon.tech or other cloud PostgreSQL providers, use their connection string:
# DATABASE_URL=postgresql://username:password@ep-example-123456.us-east-1.aws.neon.tech/skypanelv2?sslmode=require

# PayPal Configuration
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_MODE=sandbox

# SMTP2GO Email Configuration
SMTP2GO_API_KEY=your-smtp2go-api-key
SMTP2GO_USERNAME=your-smtp2go-username
SMTP2GO_PASSWORD=your-smtp2go-password
FROM_EMAIL=noreply@example.com
FROM_NAME=SkyVPS360
CONTACT_FORM_RECIPIENT=support@example.com
FROM_EMAIL=support@example.com
SMTP2GO_HOST=mail.smtp2go.com
SMTP2GO_PORT=2525 # works with most providers even if they block standard email ports
# SMTP2GO_PORT=587
# SMTP2GO_PORT=465
# Use TLS for secure email transmission
SMTP2GO_SECURE=false
# Use STARTTLS if supported by the server
SMTP2GO_REQUIRE_TLS=true
TEST_EMAIL=test@example.com

# Linode API Configuration
LINODE_API_TOKEN=your-linode-api-token
LINODE_API_URL=https://api.linode.com/v4

# DigitalOcean API Configuration (Optional)
DIGITALOCEAN_API_TOKEN=your-digitalocean-api-token

# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Encryption Key for API Keys Storage
ENCRYPTION_KEY=your-32-character-encryption-key

# Rate Limiting Configuration
# Controls API request frequency limits to prevent abuse while maintaining usability

# Legacy rate limiting (deprecated, kept for backward compatibility)
# These values are no longer used but maintained for existing deployments
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Enhanced Rate Limiting - Anonymous Users
# Limits for unauthenticated users accessing public endpoints
# Window: Time period in milliseconds (900000 = 15 minutes)
# Max: Maximum requests allowed within the window
# Recommended: 200 requests per 15 minutes for normal SPA usage
RATE_LIMIT_ANONYMOUS_WINDOW_MS=900000
RATE_LIMIT_ANONYMOUS_MAX=200

# Enhanced Rate Limiting - Authenticated Users
# Limits for users with valid JWT tokens accessing protected endpoints
# Higher limits to support authenticated application usage
# Recommended: 500 requests per 15 minutes for authenticated operations
RATE_LIMIT_AUTHENTICATED_WINDOW_MS=900000
RATE_LIMIT_AUTHENTICATED_MAX=500

# Enhanced Rate Limiting - Admin Users
# Limits for administrative operations requiring elevated privileges
# Highest limits to support admin dashboard and bulk operations
# Recommended: 1000 requests per 15 minutes for admin activities
RATE_LIMIT_ADMIN_WINDOW_MS=900000
RATE_LIMIT_ADMIN_MAX=1000

# Trust Proxy Configuration
# Critical for proper IP detection when running behind proxies or load balancers
# 
# Options:
#   'true'  - Trust all proxies (recommended for development)
#   'false' - Don't trust any proxies (direct connection only)
#   '1'     - Trust first proxy (single reverse proxy setup)
#   '2'     - Trust up to 2 proxy hops (e.g., Cloudflare + nginx)
#   'loopback' - Trust loopback addresses only
#   '10.0.0.0/8' - Trust specific subnet
#
# Development: Use 'true' when running behind Vite dev server
# Production: Use specific number or subnet for security
TRUST_PROXY=true

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads

# Monitoring Configuration
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your-influxdb-token
INFLUXDB_ORG=skypanelv2
INFLUXDB_BUCKET=metrics

# Backup Configuration
BACKUP_STORAGE_PROVIDER=local
BACKUP_RETENTION_DAYS=30

# ===================================================================
# PaaS (Platform as a Service) Configuration
# ===================================================================

# GitHub OAuth Integration for PaaS Repository Management
# Required for automatic Git-based deployments
GITHUB_CLIENT_ID=your-github-oauth-client-id
GITHUB_CLIENT_SECRET=your-github-oauth-client-secret
GITHUB_OAUTH_CALLBACK=https://your-domain.com/api/paas/github/callback

# SSL/TLS Certificate Management for PaaS Applications
# PAAS_SSL_PROVIDER: 'letsencrypt' for automatic SSL, 'none' to disable
PAAS_SSL_PROVIDER=letsencrypt
PAAS_SSL_EMAIL=admin@your-domain.com

# Docker Registry Configuration (Optional - for private registries)
# Required only if using private Docker registry
DOCKER_REGISTRY_URL=registry.example.com
DOCKER_REGISTRY_USERNAME=your-registry-username
DOCKER_REGISTRY_PASSWORD=your-registry-password

# PaaS Agent Configuration
# Settings for worker nodes that run containerized applications
PAAS_AGENT_REGION=us-east-1
PAAS_AGENT_MAX_CONTAINERS=50
PAAS_AGENT_MAX_CPU_PERCENT=80
PAAS_AGENT_MAX_MEMORY_PERCENT=85
PAAS_AGENT_INGRESS_TYPE=nginx
PAAS_AGENT_DATA_DIR=/var/lib/skypanel-agent
PAAS_AGENT_INGRESS_CONFIG_PATH=/etc/skypanel/nginx/conf.d
PAAS_AGENT_NGINX_RELOAD_COMMAND=nginx -s reload
PAAS_AGENT_LOG_LEVEL=info

# PaaS Backup Storage Configuration
# PAAS_BACKUP_STORAGE_PROVIDER: 'local', 's3', 'gcs', or 'azure'
PAAS_BACKUP_STORAGE_PROVIDER=local
PAAS_BACKUP_S3_BUCKET=your-backup-bucket
PAAS_BACKUP_S3_REGION=us-east-1
PAAS_BACKUP_S3_ACCESS_KEY=your-s3-access-key
PAAS_BACKUP_S3_SECRET_KEY=your-s3-secret-key
PAAS_BACKUP_RETENTION_DAYS=30

# PaaS System Configuration
# Core settings for the PaaS platform operation
PAAS_SYSTEM_DOMAIN_BASE=skypanel-apps.com
PAAS_DEFAULT_REGION=us-east-1
PAAS_NODE_WATCHDOG_INTERVAL_MS=30000
PAAS_OFFLINE_THRESHOLD_SECONDS=90
PAAS_BUILD_TIMEOUT_MS=900000

# PaaS Monitoring and Alerts
PAAS_METRICS_RETENTION_DAYS=7
PAAS_ALERT_EMAIL_RECIPIENTS=admin@your-domain.com,ops@your-domain.com
PAAS_CAPACITY_ALERT_COOLDOWN_MS=900000

# PaaS Security and Encryption
# PAAS_ENCRYPTION_KEY: 32+ character key for encrypting sensitive PaaS data
PAAS_ENCRYPTION_KEY=your-32-character-paes-encryption-key
# PAAS_JWT_SECRET: Separate JWT secret for PaaS agent communication
PAAS_JWT_SECRET=your-paes-jwt-secret-key
PAAS_NODE_REGISTRATION_TOKEN_EXPIRY_MINUTES=30

# PaaS Internal Service URLs
# Configure how PaaS agents communicate with the control plane
# PAAS Configuration
# Note: PaaS control plane URL is the same as CLIENT_URL since the control plane is built into SkyPanelV2
PAAS_SYSTEM_DOMAIN=apps.your-domain.com
PAAS_AGENT_WEBSOCKET_PATH=/api/internal/paas/nodes

# Let's Encrypt Configuration (if using PAAS_SSL_PROVIDER=letsencrypt)
LETSENCRYPT_ACCOUNT_EMAIL=admin@your-domain.com
LETSENCRYPT_STAGING=false
LETSENCRYPT_AGREE_TERMS=true